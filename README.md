# stock_parent
今日指数项目学习
Day1   
1)项目流程,前端资源配置,后端资源项目配置,依赖引入,项目结构   
2)前端登录功能基础实现
亮点:
1.使用R通用结果类,返回信息.
2.使用LoginResp及LoginReq vo对象,来返回登陆功能所需信息,并使用ResponseCode枚举类,来返回状态码.
3.使用PasswordEncoder 对密码进行加密解密
Day2
1)登录验证码放入redis,并实现登录功能
2)国内大盘指数展示
3)国内板块指数展示
亮点: 
1.使用IDworker生成唯一id,模拟全局唯一SessionId
2.国内大盘展示DO封装,设计到多个表的数据 sql分析中查询指定时间点下大盘主表对应的数据左外连接与log_price流水表查询
3.板块数据DO封装 以交易时间取前10
Day3
1)涨幅榜功能实现
2)涨幅榜更多数据功能实现 分页查询
3)涨停跌停数据统计功能 
4)echart快速入门
5)easyExcel快速入门
亮点:
1.涨幅榜SQL分析:先根据业务推出过滤条件，然后根据过滤条件得到小结果集，然后再将这个小的结果集进行排序运算取前10
2.分页查询中,单独定义分页对象,只配置需要的属性
3.涨停跌停中以时间分组date_format( sri.cur_time, '%Y%m%d%H%i' ) as time
4.easyExcel修改实体类表头,通过注解方式 通过 EasyExcel.write 导出
Day4
1)股票成交量对比功能
2)个股分时涨跌幅度统计功能  
3)个股分时K线行情
4)个股日K线详情
5)逻辑拆分
亮点:
1.最好不要在日期字段添加函数，这样会导致作用在日期字段上的索引失效，且后续分库分片中也失效
2.个股涨幅SQL中使用case then 来进行区间划分
3.mapper中如果有多个参数,需要加上@Param注解,否则会报错
4.步骤1查询指定股票在指定日期范围内每天的最大时间，说白了就是以天分组，求每天最大时间.以步骤1查询结果作为条件，同统计指定时间点下，股票的数据信息
Day5
1)RestTemplate API入门
2)股票国内大盘数据采集
3)大盘数据批量保存功能
4)板块实时数据采集
5)板块实时数据采集批量插入
亮点:
1.使用restTemplate远程调用新浪接口
2.使用正则表达式匹配数据
3.一次性查询数据过多,进行数据分片处理
Day06
1)定义股票数据采集执行器
2)corn表达式学习
3)股票采集服务线程池优化
4)线程池
亮点:
【1】什么时候会触发线程池的拒绝策略?
1.当我们调用 shutdown 等方法关闭线程池后，如果再向线程池内提交任务，就会遭到拒绝；
2.线程池没有空闲线程（线程达到最大线程数且都在执行任务）并且队列已经满
【2】拒绝策略类型有哪些?
线程池为我们提供了4种拒绝策略：

AbortPolicy
这种拒绝策略在拒绝任务时，会直接抛出一个类型为 RejectedExecutionException 的 RuntimeException，让你感知到任务被拒绝了，于是你便可以根据业务逻辑选择重试或者放弃提交等策略（默认）。

DiscardPolicy
当有新任务被提交后直接被丢弃掉，也不会给你任何的通知，相对而言存在一定的风险，因为我们提交的时候根本不知道这个任务会被丢弃，可能造成数据丢失。（不负责任）

DiscardOldestPolicy
丢弃任务队列中的头结点，通常是存活时间最长的任务，它也存在一定的数据丢失风险。

CallerRunsPolicy
第四种拒绝策略是 ，相对而言它就比较完善了，当有新任务提交后，如果线程池没被关闭且没有能力执行，则把这个任务交于提交任务的线程执行，也就是谁提交任务，谁就负责执行任务。
任务线程满了后，改策略可将执行的人为交换给主线程执行，这个过程相当于一个正反馈，此时如果主线程能处理，则处理，如果也不能处理，也就以为这当前服务不能接收新的任务了；
主线程处理任务期间，可以为线程池腾出时间，如果此时有新的空闲线程，那么继续协助主线程处理任务；
Day10
1)项目集成springSecurity
2)自定义权限认证过滤
3)自定义权限拒绝处理器
4)JWT入门
Day12
1)项目前端部署
2)项目后端部署
亮点:
1.使用nginx反向代理做前端服务器部署
2.后端使用maven及shell脚本命令进行打包运行